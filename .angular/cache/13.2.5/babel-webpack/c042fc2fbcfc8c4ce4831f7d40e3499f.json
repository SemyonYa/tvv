{"ast":null,"code":"import { titleAnimation } from 'src/animations/title.animation';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/services/data.service\";\nimport * as i2 from \"src/services/map.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../../shared/components/map/map.component\";\nimport * as i5 from \"@angular/common\";\n\nfunction HomeComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵlistener(\"click\", function HomeComponent_div_4_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return ctx_r1.selectRegion();\n    });\n    i0.ɵɵelementStart(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"img\", 6);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"@titleAnimation\", undefined);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.currentRegion);\n  }\n}\n\nconst _c0 = function () {\n  return [\"/cab\"];\n};\n\nexport let HomeComponent = /*#__PURE__*/(() => {\n  class HomeComponent {\n    constructor(dataService, mapService, router) {\n      this.dataService = dataService;\n      this.mapService = mapService;\n      this.router = router;\n      this.title = 'tvv';\n    }\n\n    ngOnInit() {\n      this.mapService.selectedRegion$.subscribe(item => {\n        this.currentRegion = null;\n        setTimeout(() => {\n          this.currentRegion = item === null || item === void 0 ? void 0 : item.title;\n\n          if (this.currentRegion) {\n            this.dataService.getPlaces(this.currentRegion).subscribe(items => {\n              const objects = items.map(i => ({\n                id: i.id,\n                title: i.name,\n                coordinates: {\n                  x: i.x,\n                  y: i.y\n                },\n                region: i.region,\n                projects: i.projects\n              }));\n              this.mapService.setObjects(objects);\n            });\n          } else {\n            this.mapService.setObjects([]);\n          }\n        }, 500);\n      });\n    }\n\n    selectRegion(region = null) {\n      if (region) {\n        this.router.navigateByUrl(`/map/${region}`);\n      } else {\n        this.router.navigateByUrl('/map');\n      }\n    }\n\n  }\n\n  HomeComponent.ɵfac = function HomeComponent_Factory(t) {\n    return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.DataService), i0.ɵɵdirectiveInject(i2.MapService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n\n  HomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomeComponent,\n    selectors: [[\"tvv-home\"]],\n    decls: 9,\n    vars: 3,\n    consts: [[1, \"wrap\"], [3, \"onRegionClick\"], [\"class\", \"row close-region\", 3, \"click\", 4, \"ngIf\"], [1, \"cab-link\", 3, \"routerLink\"], [\"src\", \"/assets/icons/cog.svg\", \"alt\", \"SETTINGS\"], [1, \"row\", \"close-region\", 3, \"click\"], [\"src\", \"/assets/icons/close.svg\", \"alt\", \"CLOSE\"]],\n    template: function HomeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"tvv-map\", 1);\n        i0.ɵɵlistener(\"onRegionClick\", function HomeComponent_Template_tvv_map_onRegionClick_1_listener($event) {\n          return ctx.selectRegion($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"h1\");\n        i0.ɵɵtext(3, \"\\u041A\\u0430\\u0440\\u0442\\u0430 \\u0431\\u043B\\u0430\\u0433\\u043E\\u0442\\u0432\\u043E\\u0440\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u0438\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(4, HomeComponent_div_4_Template, 4, 2, \"div\", 2);\n        i0.ɵɵelementStart(5, \"main\");\n        i0.ɵɵelement(6, \"router-outlet\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"a\", 3);\n        i0.ɵɵelement(8, \"img\", 4);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentRegion);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(2, _c0));\n      }\n    },\n    directives: [i4.MapComponent, i5.NgIf, i3.RouterOutlet, i3.RouterLinkWithHref],\n    styles: [\".wrap[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;overflow:hidden}.wrap[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{position:fixed;top:40px;right:40px;text-transform:uppercase;font-size:4.5vw;color:var(--color-blue);text-shadow:0px 0px 24px rgba(40,40,40,.03)}.wrap[_ngcontent-%COMP%]   .close-region[_ngcontent-%COMP%]{position:fixed;top:40px;left:40px;align-items:center;background-color:#fffffff2;padding:8px 16px;border-radius:16px;cursor:pointer}.wrap[_ngcontent-%COMP%]   .close-region[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.wrap[_ngcontent-%COMP%]   tvv-map[_ngcontent-%COMP%]{display:block;width:100%;height:100%;max-width:100vw;max-height:100vh}.wrap[_ngcontent-%COMP%]   .cab-link[_ngcontent-%COMP%]{position:fixed;right:16px;bottom:16px}.wrap[_ngcontent-%COMP%]   .cab-link[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px}\"],\n    data: {\n      animation: [titleAnimation]\n    }\n  });\n  return HomeComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}